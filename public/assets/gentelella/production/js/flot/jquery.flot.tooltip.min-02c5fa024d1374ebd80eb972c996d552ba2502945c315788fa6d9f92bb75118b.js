!function(i){var t={tooltip:!1,tooltipOpts:{content:"%s | X: %x | Y: %y",xDateFormat:null,yDateFormat:null,shifts:{x:10,y:20},defaultTheme:!0,onHover:function(){}}},e=function(t){this.tipPosition={x:0,y:0},this.init(t)};e.prototype.init=function(t){var n=this;t.hooks.bindEvents.push(function(t,e){if(n.plotOptions=t.getOptions(),!1!==n.plotOptions.tooltip&&"undefined"!=typeof n.plotOptions.tooltip){n.tooltipOptions=n.plotOptions.tooltipOpts;var s=n.getDomElement();i(t.getPlaceholder()).bind("plothover",function(t,e,o){var i;o?(i=n.stringFormat(n.tooltipOptions.content,o),s.html(i).css({left:n.tipPosition.x+n.tooltipOptions.shifts.x,top:n.tipPosition.y+n.tooltipOptions.shifts.y}).show(),"function"==typeof n.tooltipOptions.onHover&&n.tooltipOptions.onHover(o,s)):s.hide().html("")}),e.mousemove(function(t){var e={};e.x=t.pageX,e.y=t.pageY,n.updateTooltipPosition(e)})}})},e.prototype.getDomElement=function(){var t;return 0<i("#flotTip").length?t=i("#flotTip"):((t=i("<div />").attr("id","flotTip")).appendTo("body").hide().css({position:"absolute"}),this.tooltipOptions.defaultTheme&&t.css({background:"#fff","z-index":"100",padding:"0.4em 0.6em","border-radius":"0.5em","font-size":"0.8em",border:"1px solid #111"})),t},e.prototype.updateTooltipPosition=function(t){this.tipPosition.x=t.x,this.tipPosition.y=t.y},e.prototype.stringFormat=function(t,e){var o=/%p\.{0,1}(\d{0,})/,i=/%s/,s=/%x\.{0,1}(\d{0,})/,n=/%y\.{0,1}(\d{0,})/;return"function"==typeof t&&(t=t(e.series.data[e.dataIndex][0],e.series.data[e.dataIndex][1])),"undefined"!=typeof e.series.percent&&(t=this.adjustValPrecision(o,t,e.series.percent)),"undefined"!=typeof e.series.label&&(t=t.replace(i,e.series.label)),this.isTimeMode("xaxis",e)&&this.isXDateFormat(e)&&(t=t.replace(s,this.timestampToDate(e.series.data[e.dataIndex][0],this.tooltipOptions.xDateFormat))),this.isTimeMode("yaxis",e)&&this.isYDateFormat(e)&&(t=t.replace(n,this.timestampToDate(e.series.data[e.dataIndex][1],this.tooltipOptions.yDateFormat))),"number"==typeof e.series.data[e.dataIndex][0]&&(t=this.adjustValPrecision(s,t,e.series.data[e.dataIndex][0])),"number"==typeof e.series.data[e.dataIndex][1]&&(t=this.adjustValPrecision(n,t,e.series.data[e.dataIndex][1])),"undefined"!=typeof e.series.xaxis.tickFormatter&&(t=t.replace(s,e.series.xaxis.tickFormatter(e.series.data[e.dataIndex][0],e.series.xaxis))),"undefined"!=typeof e.series.yaxis.tickFormatter&&(t=t.replace(n,e.series.yaxis.tickFormatter(e.series.data[e.dataIndex][1],e.series.yaxis))),t},e.prototype.isTimeMode=function(t,e){return"undefined"!=typeof e.series[t].options.mode&&"time"===e.series[t].options.mode},e.prototype.isXDateFormat=function(){return"undefined"!=typeof this.tooltipOptions.xDateFormat&&null!==this.tooltipOptions.xDateFormat},e.prototype.isYDateFormat=function(){return"undefined"!=typeof this.tooltipOptions.yDateFormat&&null!==this.tooltipOptions.yDateFormat},e.prototype.timestampToDate=function(t,e){var o=new Date(t);return i.plot.formatDate(o,e)},e.prototype.adjustValPrecision=function(t,e,o){var i;return null!==e.match(t)&&""!==RegExp.$1&&(i=RegExp.$1,o=o.toFixed(i),e=e.replace(t,o)),e};var o=[],s=function(t){o.push(new e(t))};i.plot.plugins.push({init:s,options:t,name:"tooltip",version:"0.6"})}(jQuery);