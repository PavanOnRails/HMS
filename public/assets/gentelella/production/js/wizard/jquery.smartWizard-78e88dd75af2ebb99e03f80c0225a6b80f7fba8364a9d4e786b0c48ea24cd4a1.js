function SmartWizard(i,t){this.target=i,this.options=t,this.curStepIdx=t.selected,this.steps=$(i).children("ul").children("li").children("a"),this.contentWidth=0,this.msgBox=$('<div class="msgBox"><div class="content"></div><a href="#" class="close">X</a></div>'),this.elmStepContainer=$("<div></div>").addClass("stepContainer"),this.loader=$("<div>Loading</div>").addClass("loader"),this.buttons={next:$("<a>"+t.labelNext+"</a>").attr("href","#").addClass("btn btn-success"),previous:$("<a>"+t.labelPrevious+"</a>").attr("href","#").addClass("btn btn-primary"),finish:$("<a>"+t.labelFinish+"</a>").attr("href","#").addClass("btn btn-default")};var e=function(s){var t=$("<div></div>").addClass("actionBar");$(".close",s.msgBox).click(function(){return s.msgBox.fadeOut("normal"),!1});var e=s.target.children("div");if(0==s.target.children("ul").length){var a=$("<ul/>");i.prepend(a),e.each(function(t,e){var s=$(e).first().children(".StepTitle").text(),i=$(e).attr("id");i==undefined&&(i="step-"+(t+1),$(e).attr("id",i));var n=$("<span/>").addClass("stepDesc").text(s),r=$("<li></li>").append($("<a></a>").attr("href","#"+i).append($("<label></label>").addClass("stepNumber").text(t+1)).append(n));a.append(r)}),s.steps=$(i).children("ul").children("li").children("a")}s.target.children("ul").addClass("anchor"),e.addClass("wizard_content"),s.options.errorSteps&&0<s.options.errorSteps.length&&$.each(s.options.errorSteps,function(t,e){s.setError({stepnum:e,iserror:!0})}),s.elmStepContainer.append(e),s.target.append(s.elmStepContainer),s.options.includeFinishButton&&t.append(s.buttons.finish),t.append(s.buttons.next).append(s.buttons.previous),s.target.append(t),this.contentWidth=s.elmStepContainer.width(),$(s.buttons.next).click(function(){return s.goForward(),!1}),$(s.buttons.previous).click(function(){return s.goBackward(),!1}),$(s.buttons.finish).click(function(){if(!$(this).hasClass("buttonDisabled"))if($.isFunction(s.options.onFinish)){var t={fromStep:s.curStepIdx+1};if(!s.options.onFinish.call(this,$(s.steps),t))return!1}else{var e=s.target.parents("form");e&&e.length&&e.submit()}return!1}),$(s.steps).bind("click",function(){if(s.steps.index(this)==s.curStepIdx)return!1;var t=s.steps.index(this);return 1==s.steps.eq(t).attr("isDone")-0&&r(s,t),!1}),s.options.keyNavigation&&$(document).keyup(function(t){39==t.which?s.goForward():37==t.which&&s.goBackward()}),n(s),r(s,s.curStepIdx)},n=function(e){e.options.enableAllSteps?($(e.steps,e.target).removeClass("selected").removeClass("disabled").addClass("done"),$(e.steps,e.target).attr("isDone",1)):($(e.steps,e.target).removeClass("selected").removeClass("done").addClass("disabled"),$(e.steps,e.target).attr("isDone",0)),$(e.steps,e.target).each(function(t){$($(this).attr("href").replace(/^.+#/,"#"),e.target).hide(),$(this).attr("rel",t+1)})},d=function(t,e){return $($(e,t.target).attr("href").replace(/^.+#/,"#"),t.target)},r=function(e,s){var i=e.steps.eq(s),t=e.options.contentURL,n=e.options.contentURLData,r=i.data("hasContent"),a=s+1;if(t&&0<t.length)if(e.options.contentCache&&r)l(e,s);else{var o={url:t,type:e.options.ajaxType,data:{step_number:a},dataType:"text",beforeSend:function(){e.loader.show()},error:function(){e.loader.hide()},success:function(t){e.loader.hide(),t&&0<t.length&&(i.data("hasContent",!0),d(e,i).html(t),l(e,s))}};n&&(o=$.extend(o,n(a))),$.ajax(o)}else l(e,s)},l=function(t,e){var s=t.steps.eq(e),i=t.steps.eq(t.curStepIdx);if(e!=t.curStepIdx&&$.isFunction(t.options.onLeaveStep)){var n={fromStep:t.curStepIdx+1,toStep:e+1};if(!t.options.onLeaveStep.call(t,$(i),n))return!1}var r=t.curStepIdx;if(t.curStepIdx=e,"slide"==t.options.transitionEffect)d(t,i).slideUp("fast",function(){d(t,s).slideDown("fast"),p(t,i,s)});else if("fade"==t.options.transitionEffect)d(t,i).fadeOut("fast",function(){d(t,s).fadeIn("fast"),p(t,i,s)});else if("slideleft"==t.options.transitionEffect){var a=null,o=0;r<e?(a=t.elmStepContainer.width()+10,o=(nextElmLeft2=0)-d(t,i).outerWidth()):(a=0-d(t,s).outerWidth()+20,nextElmLeft2=0,o=10+d(t,i).outerWidth()),e==r?(a=$($(s,t.target).attr("href"),t.target).outerWidth()+20,o=(nextElmLeft2=0)-$($(i,t.target).attr("href"),t.target).outerWidth()):$($(i,t.target).attr("href"),t.target).animate({left:o},"fast",function(){$($(i,t.target).attr("href"),t.target).hide()}),d(t,s).css("left",a).show().animate({left:nextElmLeft2},"fast",function(){p(t,i,s)})}else d(t,i).hide(),d(t,s).show(),p(t,i,s);return!0},p=function(t,e,s){if($(e,t.target).removeClass("selected"),$(e,t.target).addClass("done"),$(s,t.target).removeClass("disabled"),$(s,t.target).removeClass("done"),$(s,t.target).addClass("selected"),$(s,t.target).attr("isDone",1),a(t),$.isFunction(t.options.onShowStep)){var i={fromStep:parseInt($(e).attr("rel")),toStep:parseInt($(s).attr("rel"))};if(!t.options.onShowStep.call(this,$(s),i))return!1}if(t.options.noForwardJumping)for(var n=t.curStepIdx+2;n<=t.steps.length;n++)t.disableStep(n)},a=function(t){t.options.cycleSteps||(t.curStepIdx<=0?($(t.buttons.previous).addClass("buttonDisabled"),t.options.hideButtonsOnDisabled&&$(t.buttons.previous).hide()):($(t.buttons.previous).removeClass("buttonDisabled"),t.options.hideButtonsOnDisabled&&$(t.buttons.previous).show()),t.steps.length-1<=t.curStepIdx?($(t.buttons.next).addClass("buttonDisabled"),t.options.hideButtonsOnDisabled&&$(t.buttons.next).hide()):($(t.buttons.next).removeClass("buttonDisabled"),t.options.hideButtonsOnDisabled&&$(t.buttons.next).show())),t.enableFinish(t.options.enableFinishButton)};SmartWizard.prototype.goForward=function(){var t=this.curStepIdx+1;if(this.steps.length<=t){if(!this.options.cycleSteps)return!1;t=0}r(this,t)},SmartWizard.prototype.goBackward=function(){var t=this.curStepIdx-1;if(t<0){if(!this.options.cycleSteps)return!1;t=this.steps.length-1}r(this,t)},SmartWizard.prototype.goToStep=function(t){var e=t-1;0<=e&&e<this.steps.length&&r(this,e)},SmartWizard.prototype.enableStep=function(t){var e=t-1;if(e==this.curStepIdx||e<0||e>=this.steps.length)return!1;var s=this.steps.eq(e);$(s,this.target).attr("isDone",1),$(s,this.target).removeClass("disabled").removeClass("selected").addClass("done")},SmartWizard.prototype.disableStep=function(t){var e=t-1;if(e==this.curStepIdx||e<0||e>=this.steps.length)return!1;var s=this.steps.eq(e);$(s,this.target).attr("isDone",0),$(s,this.target).removeClass("done").removeClass("selected").addClass("disabled")},SmartWizard.prototype.currentStep=function(){return this.curStepIdx+1},SmartWizard.prototype.showMessage=function(t){$(".content",this.msgBox).html(t),this.msgBox.show()},SmartWizard.prototype.enableFinish=function(t){return this.options.enableFinishButton=t,this.options.includeFinishButton&&(!this.steps.hasClass("disabled")||this.options.enableFinishButton?($(this.buttons.finish).removeClass("buttonDisabled"),this.options.hideButtonsOnDisabled&&$(this.buttons.finish).show()):($(this.buttons.finish).addClass("buttonDisabled"),this.options.hideButtonsOnDisabled&&$(this.buttons.finish).hide())),this.options.enableFinishButton},SmartWizard.prototype.hideMessage=function(){this.msgBox.fadeOut("normal")},SmartWizard.prototype.showError=function(t){this.setError(t,!0)},SmartWizard.prototype.hideError=function(t){this.setError(t,!1)},SmartWizard.prototype.setError=function(t,e){"object"==typeof t&&(e=t.iserror,t=t.stepnum),e?$(this.steps.eq(t-1),this.target).addClass("error"):$(this.steps.eq(t-1),this.target).removeClass("error")},SmartWizard.prototype.fixHeight=function(){var t=0,e=this.steps.eq(this.curStepIdx),s=d(this,e);s.children().each(function(){$(this).is(":visible")&&(t+=$(this).outerHeight(!0))}),s.height(t+5),this.elmStepContainer.height(t+20)},e(this)}!function(r){r.fn.smartWizard=function(s){var i=arguments,n=undefined,t=this.each(function(){var t=r(this).data("smartWizard");if("object"!=typeof s&&s&&t){if("function"==typeof SmartWizard.prototype[s])return n=SmartWizard.prototype[s].apply(t,Array.prototype.slice.call(i,1));r.error("Method "+s+" does not exist on jQuery.smartWizard")}else{var e=r.extend({},r.fn.smartWizard.defaults,s||{});t||(t=new SmartWizard(r(this),e),r(this).data("smartWizard",t))}});return n===undefined?t:n},r.fn.smartWizard.defaults={selected:0,keyNavigation:!0,enableAllSteps:!1,transitionEffect:"fade",contentURL:null,contentCache:!0,cycleSteps:!1,enableFinishButton:!1,hideButtonsOnDisabled:!1,errorSteps:[],labelNext:"Next",labelPrevious:"Previous",labelFinish:"Finish",noForwardJumping:!1,ajaxType:"POST",onLeaveStep:null,onShowStep:null,onFinish:null,includeFinishButton:!0}}(jQuery);